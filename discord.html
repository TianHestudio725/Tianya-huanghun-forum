<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天涯黄昏-Discord | 一念逍遥官方论坛</title>
    <!-- 保持与index.html相同的样式引用 -->
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+QingKe+HuangYou&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 继承主站样式 */
        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2691E;
            --accent-color: #FFD700;
            --dark-bg: #1a120b;
            --light-bg: #f5f5dc;
            --discord-color: #5865F2;
        }
        
        body {
            font-family: 'ZCOOL QingKe HuangYou', 'Microsoft YaHei', sans-serif;
            background: url('https://www.metmuseum.org/toah/images/hb/hb_1989.363.39.jpg') no-repeat center 70%/cover fixed;
            &::after {
                content: "";
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.15);
                z-index: -1;
            }
            color: #333;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        .scroll-container {
            background: url('https://www.transparenttextures.com/patterns/rice-paper.png');
            background-color: rgba(245, 245, 220, 0.9);
            width: 85%;
            min-height: 90vh;
            margin: 5vh auto;
            padding: 2rem;
            border-radius: 5px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            position: relative;
            border: 12px solid transparent;
            border-image: url('https://www.transparenttextures.com/patterns/old-wall.png') 30 round;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .header h1 {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 3.5rem;
            color: var(--primary-color);
            text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2);
            margin-bottom: 0.5rem;
            letter-spacing: 5px;
        }
        
        /* Discord 专属内容样式 */
        .discord-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .discord-logo {
            font-size: 5rem;
            color: var(--discord-color);
            margin-bottom: 1rem;
        }
        
        .discord-title {
            font-size: 2rem;
            color: var(--discord-color);
            margin-bottom: 1.5rem;
            font-weight: bold;
        }
        
        .discord-invite {
            background: linear-gradient(to right, var(--discord-color), #7289DA);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.2rem;
            display: inline-block;
            margin: 1rem 0;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .discord-invite:hover {
            transform: translateY(-3px);
        }
        
        .discord-widget {
            background: #36393f;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem auto;
            max-width: 400px;
            color: white;
            text-align: left;
        }
        
        .discord-rules {
            text-align: left;
            max-width: 700px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
        }
        
        .discord-back {
            display: inline-block;
            margin-top: 2rem;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 1.1rem;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .scroll-container {
                width: 95%;
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .discord-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- 主内容卷轴 -->
    <div class="scroll-container">
        <!-- 宗门标题 -->
        <div class="header">
            <h1>天涯黄昏-Discord</h1>
            <p>官方修仙交流群</p>
        </div>
        
        <!-- Discord 内容 -->
        <div class="discord-container">
            <div class="discord-logo">
                <i class="fab fa-discord"></i>
            </div>
            <h2 class="discord-title">加入我们的Discord社区</h2>
            <p>与更多道友交流修仙心得，获取最新游戏资讯</p>
            
            <a href="https://discord.gg/ejEaTAq6TY" class="discord-invite" target="_blank">
                <i class="fab fa-discord"></i> 点击加入Discord
            </a>
            
            <div class="discord-widget">
                <h3><i class="fas fa-users"></i> 社区在线</h3>
                <p>当前在线：<span id="discord-members">--</span> 位道友</p>
                <p>语音频道：<span id="discord-voice">--</span> 位道友</p>
            </div>
            
            <div class="discord-rules">
                <h3><i class="fas fa-scroll"></i> 社区守则</h3>
                <ol>
                    <li>请使用游戏内角色名作为Discord昵称</li>
                    <li>禁止发布广告或无关链接</li>
                    <li>讨论请保持友善，禁止人身攻击</li>
                    <li>重大活动通知会优先在Discord发布</li>
                </ol>
            </div>
            
            <a href="index.html" class="discord-back">
                <i class="fas fa-arrow-left"></i> 返回主论坛
            </a>
        </div>
    </div>

    <script>
        // Discord服务器状态获取
        function updateDiscordStats() {
            // 替换为您的Discord服务器ID
            const serverId = 'YOUR_SERVER_ID'; 
            
            fetch(`https://discord.com/api/guilds/${serverId}/widget.json`)
                .then(response => {
                    if (!response.ok) throw new Error('获取失败');
                    return response.json();
                })
                .then(data => {
                    // 更新在线人数
                    document.getElementById('discord-members').textContent = 
                        data.presence_count || '0';
                    
                    // 计算语音频道中的用户数
                    let voiceUsers = 0;
                    data.channels.forEach(channel => {
                        if (channel.type === 2) { // 2代表语音频道
                            voiceUsers += channel.members?.length || 0;
                        }
                    });
                    document.getElementById('discord-voice').textContent = 
                        voiceUsers || '0';
                })
                .catch(error => {
                    console.error('Discord状态获取失败:', error);
                    document.getElementById('discord-members').textContent = '获取失败';
                    document.getElementById('discord-voice').textContent = '获取失败';
                });
        }

        // 页面加载时获取数据
        document.addEventListener('DOMContentLoaded', function() {
            updateDiscordStats();
            // 每5分钟刷新一次数据
            setInterval(updateDiscordStats, 300000);
        });
        
        // 返回按钮动画 (保持原有功能)
        document.querySelector('.discord-back').addEventListener('mouseover', function() {
            this.style.transform = 'translateX(-5px)';
        });
        
        document.querySelector('.discord-back').addEventListener('mouseout', function() {
            this.style.transform = 'translateX(0)';
        });
    </script>
</body>
</html>
